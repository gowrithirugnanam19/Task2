package com.example.spring_web.controller;

import java.util.ArrayList;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
//import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.servlet.ModelAndView;
import com.example.spring_web.SpringWebApplication;
import com.example.spring_web.bean.ShipBean;
import com.example.spring_web.service.ShipService;

//import ch.qos.logback.core.model.Model;

@RestController
@RequestMapping("/admin") //request mapping is for getting values-single values
public class AdminController {

    private final SpringWebApplication springWebApplication;
@Autowired
	private ShipService shserv;

    AdminController(SpringWebApplication springWebApplication) {
        this.springWebApplication = springWebApplication;
    }
@GetMapping("/welcome")
public String meth1() {
	return "<marquee direction='right'> Welcome to SpringBoot Application</marquee>";
}
@GetMapping("/data")
public ArrayList<String> meth2(){
   ArrayList<String> al=new ArrayList<String>();
   al.add("Mango");
   al.add("Guava");
   return al;
}
@GetMapping("/first")
public ModelAndView meth3() {
	return new ModelAndView("Login");
}
@GetMapping("/validate")
public ModelAndView meth4(@RequestParam("user")String usr,@RequestParam("pass")String pss) {
	if(usr.equals("AD-001")&& pss.equals("AD-001"))
	{
	return new ModelAndView("AddShip");
	}
	else if(usr.equals("AD-002")&& pss.equals("AD-002"))
	{
	return new ModelAndView("UpdateShip");
	}
	else if(usr.equals("AD-003")&& pss.equals("AD-003")) {
		return new ModelAndView("DeleteShip");
	}
	else if(usr.equals("AD-004")&& pss.equals("AD-004")) {
		return new ModelAndView("SelectAllShips");
	}
  else {
	  return new ModelAndView("Invalid");
  }
}
//Add a new ship and display all ships as text

@PostMapping("/addShip")
public String meth5(@ModelAttribute("sb") ShipBean sb) {
	int i=shserv.addShip(sb);
	return "<h1>"+i+"ship added successfully</h1>";
 }
@PostMapping("/updateShip")
public String meth6(@ModelAttribute("sb") ShipBean sb) {
	System.out.println(sb);
	int i=shserv.updateShip(sb);
	return "<h1>"+i+" ship updated successfully</h1>";
}
@PostMapping("/deleteShip")
public String meth7(@RequestParam("shipID")String shipID)
{
int i=shserv.deleteShip(shipID);
return "<h1>"+i+" ship deleted successfully</h1>";
}

@PostMapping("/selectAll")
public ModelAndView meth8(Model m)
{
ArrayList<ShipBean> allShips= shserv.selectAllShips();
System.out.println(allShips);
m.addAttribute("aaa", allShips);
return new ModelAndView("DisplayShips");
}
}